const canvas=document.getElementById("gameCanvas"),ctx=canvas.getContext("2d"),dpr=window.devicePixelRatio||1;canvas.width=canvas.offsetWidth*dpr,canvas.height=canvas.offsetHeight*dpr,ctx.scale(dpr,dpr);const numRows=Math.floor(canvas.height),numCols=Math.floor(canvas.width);function createGrid(){const e=[];for(let t=0;t<numRows;t++){e[t]=[];for(let n=0;n<numCols;n++)e[t][n]=Math.random()>.7?1:0}return e}let animationId,isRunning,grid=createGrid();const desiredFPS=60,frameInterval=1e3/desiredFPS;let lastFrameTime=0;function drawGrid(){ctx.clearRect(0,0,canvas.width,canvas.height);for(let e=0;e<numRows;e++)for(let t=0;t<numCols;t++)grid[e][t]===1&&(ctx.fillStyle="white",ctx.fillRect(t*1,e*1,1,1))}function updateGrid(){const e=[];for(let t=0;t<numRows;t++){e[t]=[];for(let n=0;n<numCols;n++){const s=countNeighbors(t,n);grid[t][n]===1&&(s<2||s>3)?e[t][n]=0:grid[t][n]===0&&s===3?e[t][n]=1:e[t][n]=grid[t][n]}}grid=e}function countNeighbors(e,t){let n=0;for(let s=-1;s<=1;s++)for(let o=-1;o<=1;o++){const i=e+s,a=t+o;i>=0&&i<numRows&&a>=0&&a<numCols&&(s!==0||o!==0)&&(n+=grid[i][a])}return n}function resizeCanvas(){pause(),setTimeout(()=>{canvas.width=canvas.offsetWidth*dpr,canvas.height=canvas.offsetHeight*dpr,play()},2e3)}const togglePause=()=>{if(!isRunning){isRunning=!0,mainLoop();return}isRunning=!1,cancelAnimationFrame(animationId)},restart=()=>{cancelAnimationFrame(animationId),grid=createGrid(),drawGrid(),isRunning=!0,animationId=requestAnimationFrame(mainLoop)};function mainLoop(e){e-lastFrameTime>=frameInterval&&(lastFrameTime=e,updateGrid(),drawGrid()),isRunning&&(animationId=requestAnimationFrame(mainLoop))}document.getElementById("playPauseButton").addEventListener("click",()=>togglePause()),document.getElementById("restartButton").addEventListener("click",()=>restart()),window.addEventListener("resize",resizeCanvas),isRunning=!0,animationId=requestAnimationFrame(mainLoop)